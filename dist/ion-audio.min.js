function ionMediaPlayer(n,i){return{transclude:!0,template:"<ng-transclude></ng-transclude>",restrict:"E",scope:{tracks:"=",togglePlayback:"="},require:"ionMediaPlayer",link:function(n,i,o,t){t.hasOwnProgressBar=i.find("ion-audio-progress-bar").length>0},controller:["$scope","$element",function(o,t){var a=this,r=function(){i.$broadcast("ionic-audio:trackChange",o.track)};this.seekTo=function(i){n.seekTo(i)},this.getTrack=function(){return o.track},this.start=function(){return o.track&&o.track.url?(n.play(o.track.id),a.hasOwnProgressBar||r(),o.track.id):void 0},o.$on("$destroy",function(){})}]}}function ionAudioProgress(){return{restrict:"E",scope:{track:"="},template:"{{track.progress | time}}"}}function ionAudioProgressBar(n){function i(i,o,t){function a(){i.track.progress=0,i.track.status=0,i.track.duration=-1}var r,e=o.find("input");angular.isDefined(t.displayTime)||(o.find("ion-audio-progress").remove(),o.find("ion-audio-duration").remove()),angular.isDefined(t.displayInfo)||o.find("h2").remove(),angular.isUndefined(i.track)&&(i.track={},r=i.$on("ionic-audio:trackChange",function(n,o){i.track=o}));var u=i.$watch("track.status",function(n){e.prop("disabled",0==n)});i.displayTrackInfo=function(){return{visibility:angular.isDefined(t.displayInfo)&&(i.track.title||i.track.artist)?"visible":"hidden"}},i.sliderRelease=function(){var o=i.track.progress;n.seekTo(o)},i.$on("$destroy",function(){u(),angular.isDefined(r)&&r()}),a()}return{restrict:"E",scope:{track:"="},template:'<h2 class="ion-audio-track-info" ng-style="displayTrackInfo()">{{track.title}} - {{track.artist}}</h2><div class="range"><ion-audio-progress track="track"></ion-audio-progress><input type="range" name="volume" min="0" max="{{track.duration}}" ng-model="track.progress" on-release="sliderRelease()" disabled><ion-audio-duration track="track"></ion-audio-duration></div>',link:i}}function ionAudioPlay(n,i,o){return{restrict:"A",require:"^^ionAudioControls",link:function(t,a,r,e){console.log("printing controller"),console.log(e);var u,s,c=0,l=function(){u=!1,a.addClass("ion-play"),a.removeClass("ion-pause"),a.text(r.textPlay)},d=function(){r.textPlay&&r.textPause&&a.text(a.text()==r.textPlay?r.textPause:r.textPlay)},g=function(n){"undefined"!=typeof n?n?(a.removeClass("ion-pause"),a.addClass("ion-play")):(a.removeClass("ion-play"),a.addClass("ion-pause")):a.toggleClass("ion-play ion-pause"),d()};n.on("tap",function(){return s||u?void(s=!1):(0==c&&(u=!0),e.play(),void g())},a),n.on("doubletap",function(){s=!0},a);var f=t.$parent.$watch("track.status",function(n){o.$emit("ionic-audio:statusChange",n),0==n||4==n?l():2==n&&(u=!1),c=n}),p=t.$parent.$watch("togglePlayback",function(n,o){n!=o&&i(function(){g(),e.play()},300)});l(),t.$on("$destroy",function(){f(),p()})}}}function ionAudioDuration(){return{restrict:"E",scope:{track:"="},template:"{{track.duration | duration}}"}}angular.module("ionic-audio",["ionic"]),angular.module("ionic-audio").filter("time",function(){var n=function(n){return(new Array(2).join("0")+n).slice(-2)};return function(i){i=i||0;var o=parseInt(i);return n(Math.floor(o/60))+":"+n(o%60)}}),angular.module("ionic-audio").filter("duration",["$filter",function(n){return function(i){return i>0?n("time")(i):""}}]),angular.module("ionic-audio").factory("MediaManager",["$interval","$timeout","$window","$rootScope",function(n,i,o,t){function a(){return M.length}function r(){return M}function e(n,i,o,a,e){p(),d(),M=[],T=0;for(var s=0,c=n.length;c>s;s++)u(n[s],i,o,a,e);t.$broadcast("ionic-audio:setTracks",r())}function u(n,i,o,t,a){return n.url?(angular.extend(n,{onSuccess:i,onError:o,onStatusChange:t,onProgress:a,status:0,duration:-1,progress:0}),n.id=M.push(n)-1,n.id):void console.log("ionic-audio: missing track url")}function s(n){if("undefined"!=typeof n){if(n>a()-1)return;C&&T==n?S||f():(p(),C=M[n],T=n,g())}else C?S||f():(C=M[T],g())}function c(){console.log("ionic-audio: pausing track "+C.title),A.pause(),$(),S=!1}function l(n){A&&A.seekTo(1e3*n)}function d(){$(),y()}function g(){console.log("ionic-audio: playing track "+C.title),A=k(C),A.play(),P()}function f(){console.log("ionic-audio: resuming track "+C.title),A.play(),P(),S=!0}function p(){A&&(console.log("ionic-audio: stopping track "+C.title),A.stop(),S=!1)}function k(n){return n.url?new Media(n.url,angular.bind(n,v),angular.bind(n,h),angular.bind(n,m)):void console.log("ionic-audio: missing track url")}function y(){angular.isDefined(A)&&(A.release(),A=void 0,C=void 0)}function v(){$(),y(),angular.isFunction(this.onSuccess)&&this.onSuccess()}function h(){angular.isFunction(this.onError)&&this.onError()}function m(n){this.status=n,t.$broadcast("ionic-sudio:status",n),angular.isFunction(this.onStatusChange)&&this.onStatusChange(n)}function $(){t.$broadcast("ionic-audio:startStopToggle","stopped"),angular.isDefined(b)&&(n.cancel(b),b=void 0)}function P(){t.$broadcast("ionic-audio:startStopToggle","started"),angular.isDefined(b)||C&&(b=n(function(){C.duration<0&&(C.duration=A.getDuration()),A.getCurrentPosition(function(n){n>-1&&(C.progress=n)},function(n){console.log("Error getting pos="+n)}),angular.isFunction(C.onProgress)&&C.onProgress(C.progress,C.duration)},1e3))}var C,A,b,S,M=[],T=0;return o.cordova||o.Media?{setTracks:e,add:u,play:s,pause:c,stop:p,seekTo:l,destroy:d,getPlaylistSize:a,getPlaylistPosition:playlistPosition,getPlaylist:r}:(console.log("ionic-audio: missing Cordova Media plugin. Have you installed the plugin? \nRun 'ionic plugin add cordova-plugin-media'"),null)}]),angular.module("ionic-audio").directive("ionMediaPlayer",["MediaManager","$rootScope",ionMediaPlayer]),angular.module("ionic-audio").directive("ionAudioProgress",ionAudioProgress),angular.module("ionic-audio").directive("ionAudioProgressBar",["MediaManager",ionAudioProgressBar]),angular.module("ionic-audio").directive("ionAudioPlay",["$ionicGesture","$timeout","$rootScope",ionAudioPlay]),angular.module("ionic-audio").directive("ionAudioDuration",ionAudioDuration),angular.module("ionic-audio").directive("ionAudioControls",function(){function n(n,i){var o,t=i.find("ion-spinner"),a=this;this.toggleSpinner=function(n){n?t.addClass("ng-hide"):t.removeClass("ng-hide")},toggleSpinner(!0),this.play=function(){o||a.toggleSpinner(!1),this.start()};var r=n.$parent.$watch("track.status",function(n){switch(n){case 1:o=!1;break;case 2:o||(a.toggleSpinner(!1),o=!0);break;case 0:case 4:o=!1}});n.$on("$destroy",function(){r()})}function i(n,i,o,t){t[0].start=t[1].start}return{restrict:"EA",require:["ionAudioControls","^^ionAudioTrack"],controller:["$scope","$element",n],link:i}});